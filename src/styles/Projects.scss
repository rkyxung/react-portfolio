@use './fonts' as *;

.projects-viewport {
  background-color: #050505;
  min-height: 100vh;
  font-family: 'Pretendard', sans-serif;
  overflow: hidden;

  .viewport {
    width: 100vw;
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #050505;
    perspective: 78.125vw; /* 외부에서 보는 시점 (1920px 기준) */
  }

  /* A 타입: 위 / 가운데 / 아래 3개 면 */
  .planes {
    position: relative;
    width: 100%;
    height: 100%;
    overflow: visible;
  }

  .plane {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    will-change: transform, opacity;
    transition: transform 0.2s ease-out, opacity 0.2s ease-out;
  }

  .plane-top {
    z-index: 3;

    .top-inner {
      text-align: center;
      color: #fff;

      .top-logo {
        font-family: 'Syncopate', sans-serif;
        font-size: 7rem;
        font-weight: 700;
        line-height: 1;
        margin: 0;
        text-transform: uppercase;
        letter-spacing: 0.08em;
      }

      .top-subtitle {
        font-size: 1rem;
        letter-spacing: 0.3em;
        color: rgba(255, 255, 255, 0.7);
        margin-top: 1.481vh; /* 16px → 1920x1080 기준 */
        text-transform: uppercase;
      }
    }
  }

  .plane-middle {
    z-index: 2;
    position: relative;
  }

  /* 왼쪽: 프로젝트 네비게이션 */
  .projects-nav {
    position: absolute;
    left: 2.083vw; /* 40px → 1920px 기준 */
    top: 50%;
    transform: translateY(-50%);
    z-index: 100;
    width: 18vw; /* 고정 너비 */
    max-height: 80vh;
    overflow-y: auto;
    padding-right: 1.042vw; /* 20px */

    &::-webkit-scrollbar {
      width: 0.208vw; /* 4px */
    }

    &::-webkit-scrollbar-track {
      background: transparent;
    }

    &::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.2);
      border-radius: 0.104vw; /* 2px */
    }

    .nav-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .nav-section-title {
      @include pretendard-semibold;
      font-size: 1.1vw;
      color: rgba(255, 255, 255, 0.8);
      text-transform: uppercase;
      margin: 2vh 0 1vh;
      padding-left: 0.6vw; 

      &.active {
        color: #FF5912;
      }
    }

    .nav-item {
      display: flex;
      align-items: center;
      padding: 0.6vh 1.04vw; /* 10px 10px */
      cursor: pointer;
      color: rgba(255, 255, 255, 0.6);
      font-size: 1.04vw;
      transition: background-color 0.2s;
      margin: 0.5vh 0;
      border-radius: 2.5vw;
      letter-spacing: -0.03em;

      &:hover {
        background-color: rgba(255, 255, 255, 0.05);
      }

      &.active {
        background-color: #FF5912; /* 오렌지 하이라이트 */
        color: #fff;
      }

      .nav-title {
        flex: 1;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
    }
  }

  /* 오른쪽: 프로젝트 설명 (비디오/코드 구분) */
  .projects-info {
    position: absolute;
    z-index: 100;
    overflow-y: auto;
    overflow-x: hidden;
    padding-left: 1.042vw;
    padding-right: 0.9vw; /* 스크롤바 영역 확보 */
    white-space: pre-line;
    pointer-events: auto;
    right: 0;

    &.video {
      bottom: 5vh;
      width: 25vw;
      max-height: 80vh;
      height: auto;
      &::before,
      &::after {
        display: none;
      }
    }

    &.code {
      top: 23.5vh;
      width: 25vw;
      height: calc(100vh - 24vh); /* 상단 여백 고려 */
    }

    .info-content {
      color: #fff;
      max-height: 100%;
      overflow-y: auto;
      padding-right: 0.4vw;
      padding: 2vh 0 4vh; /* 설명 끝과 그라데이션 사이 여유 */
      white-space: pre-line;
      color: rgba(255, 255, 255, 0.9);
      scrollbar-width: none; /* Firefox */
    }

    .info-content::-webkit-scrollbar {
      display: none; /* Chrome/Safari/Edge */
    }

    &.code {
      .info-content {
        white-space: normal;
      }
    }

    .code-description {
      display: flex;
      flex-direction: column;
      gap: 0.45vh;
      padding: 0.4vw 0 0.6vw;
    }

    &.code {
      /* 상하 그라데이션 마스크 (코드뷰 전용) */
      &::before,
      &::after {
        content: '';
        position: absolute;
        left: 0;
        width: 100%;
        height: 5vh;
        pointer-events: none;
        z-index: 5;
      }

      &::before {
        top: 0;
        background: linear-gradient(to bottom, rgba(0, 0, 0, 0.75), transparent);
      }

      &::after {
        bottom: 0;
        background: linear-gradient(to top, rgba(0, 0, 0, 0.75), transparent);
      }
    }

    .desc-line {
      font-size: 0.98vw;
      line-height: 1.55;
      color: rgba(239, 240, 241, 0.9);
      letter-spacing: -0.01em;
      padding-left: 0;
      border-left: none;
      white-space: pre-wrap;
      font-weight: 500;

      &.heading {
        font-weight: 800;
        color: #fff;
        border-color: #FF5912;
      }

      &.heading-1 {
        font-size: 1.08vw;
      }

      &.heading-2 {
        font-size: 1.02vw;
      }

      &.heading-3 {
        font-size: 0.98vw;
        color: #ffe4d6;
      }

      &.subheading {
        font-weight: 700;
        color: #ffd5c1;
      }

      &.bullet {
        padding-left: 1.1vw;
        position: relative;

        &::before {
          content: '•';
          position: absolute;
          left: 0.25vw;
          color: rgba(255, 255, 255, 0.65);
        }
      }

      &.spacer {
        border-color: transparent;
      }

      &.muted {
        color: rgba(255, 255, 255, 0.5);
        border-color: transparent;
      }
    }

    .desc-strong {
      font-weight: 800;
      color: #fff;
    }

    .info-header {
      margin-bottom: 1.852vh; /* 20px */

      .project-title {
        @include unbounded-semibold;
        font-size: 1.8vw;
        margin: 0;
        color: #f7f7f7;
      }
    }

    .info-meta {
      display: flex;
      flex-direction: row;
      align-items: center;
      gap: 0.6vw;
      margin-bottom: 1.9vh;
      padding-bottom: 1.9vh; 
      border-bottom: 0.05vw solid rgba(255, 255, 255, 0.2);

      .role {
        @include pretendard-regular;
        font-size: 0.9vw;
        color: rgba(255, 255, 255, 0.9);
        display: inline-flex;
        align-items: center;

        &::after {
          content: '|';
          display: inline-block;
          margin-left: 0.5vw;
          font-size: 1.2vw;
          color: rgba(255, 255, 255, 0.2);
        }
      }

      .period {
        @include pretendard-regular;
        font-size: 0.9vw;
        color: rgba(255, 255, 255, 0.9);
      }
    }

    .summary {
      @include pretendard-medium;
      font-size: 1.04vw;
      line-height: 1.6;
      color: rgba(255, 255, 255, 0.9);
      margin-bottom: 1.9vh;
    }

    .details-list {
      list-style: none;
      padding: 0;
      margin: 0 0 1.852vh 0; /* 20px */
      
      li {
        position: relative;
        padding-left: 1.042vw; /* 20px */
        margin-bottom: 0.926vh; /* 10px */
        color: rgba(255, 255, 255, 0.9);
        line-height: 1.5;
        font-size: 1vw;

        &::before {
          content: '•';
          position: absolute;
          left: 0;
          color: rgba(255, 255, 255, 0.45);
        }
      }
    }

    .tags {
      display: flex;
      flex-wrap: wrap;
      gap: 0.521vw; /* 10px */
      margin-bottom: 1.852vh; /* 20px */

      .tag {
        font-size: 0.94vw;
        padding: 0.463vh 0.521vw; /* 5px 10px */
        background: rgba(255, 255, 255, 0.08);
        color: rgba(255, 255, 255, 0.9);
        border-radius: 0.208vw; /* 4px */
      }
    }

    .link-buttons {
      display: flex;
      gap: 0.625vw;
      margin-top: 0.5vh;
    }

    .link-button {
      display: inline-block;
      padding: 0.926vh 1.042vw; /* 10px 20px */
      background: rgba(255, 255, 255, 0.1);
      color: #fff;
      text-decoration: none;
      border-radius: 0.208vw; /* 4px */
      font-size: 0.94vw;
      transition: background-color 0.3s;

      &:hover {
        background: #FF5912;
      }

      &.secondary {
        background: rgba(255, 255, 255, 0.1);

        &:hover {
          background: #FF5912;
        }
      }
    }
  }

  .plane-bottom {
    z-index: 1;

    .bottom-inner {
      display: flex;
      gap: 2.083vw; /* 40px → 1920px 기준 */
      padding: 2.222vh 2.083vw; /* 24px 40px → 1920x1080 기준 */
      background-color: rgba(0, 0, 0, 0.7);
      border-top: 1px solid rgba(255, 255, 255, 0.25);
      border-bottom: 1px solid rgba(255, 255, 255, 0.25);
      backdrop-filter: blur(0.417vw); /* 8px → 1920px 기준 */
      color: #fff;
      align-items: flex-start;
      justify-content: center;

      .bottom-column {
        display: flex;
        flex-direction: column;
        gap: 0.741vh; /* 8px → 1080px 기준 */
        min-width: 9.375vw; /* 180px → 1920px 기준 */

        h3 {
          font-size: 0.9rem;
          letter-spacing: 0.18em;
          text-transform: uppercase;
          margin: 0 0 0.741vh; /* 8px → 1080px 기준 */
          color: rgba(255, 255, 255, 0.8);
        }

        button {
          border: 1px solid #fff;
          background: #000;
          color: #fff;
          font-size: 0.8rem;
          padding: 0.556vh 0.625vw; /* 6px 12px → 1920x1080 기준 */
          text-transform: none;
          cursor: pointer;
          text-align: left;
          white-space: nowrap;

          &:hover {
            background: #fff;
            color: #000;
          }
        }
      }
    }
  }

  /* 중앙 카드 컨테이너 - 왼쪽 네비와 오른쪽 설명 공간 확보 */
.stage-container {
  width: calc(100vw - 45vw); /* 전체 너비에서 왼쪽(20vw) + 오른쪽(25vw) 제외 */
  max-width: 50vw; /* 최대 너비 제한 */
  height: 100%;
  position: relative;
  display: flex;
  align-items: flex-start; /* 상단 기준 정렬 */
  justify-content: center;
  margin: 0 auto; /* 중앙 정렬 */
  padding-top: 23.5vh; /* 비디오/코드 동일 상단 위치 */
}

  .view-toggle {
    position: absolute;
    top: 18vh;
    right: 0.5vw;
    z-index: 200;
    cursor: pointer;
    scale: 1.1;

    .toggle-track {
      position: relative;
      width: 4vw; 
      height: 4.13vh; 
      background: rgba(112, 112, 112, 0.35);
      box-shadow: 0 1.015px 4.062px 0 rgba(0, 0, 0, 0.15) inset;
      backdrop-filter: blur(6.623544216156006px);
      border-radius: 2.083vw; /* 40px - 둥근 형태 */
      padding: 0.521vw; /* 10px */
    }

    .toggle-slider {
      position: absolute;
      width: 1.67vw; 
      height: 1.67vw; 
      background: #EFF0F1;
      stroke-width: 0.045vw;
      stroke: #E1E1E1;
      border-radius: 50%; 
      top: 0.57vh; 
      left: 0.26vw;
      transition: transform 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0.104vw 0.313vw rgba(0, 0, 0, 0.2);

      svg {
        width: 0.88vw
      }

      svg:last-child {
        width: 1.1vw; 
      }

      &.active {
        /* 이동 거리 = 트랙 내부 가로(4.17 - 2*0.521) - 슬라이더 너비(1.67) ≈ 1.46vw */
        transform: translateX(1.8vw);
        background: #FF5912;
      }
    }
  }

  /* 카드들이 배치될 3D 공간 */
  .card-stack {
    position: relative;
    width: 100%;
    aspect-ratio: 16 / 9; 
    transform-style: preserve-3d;
  }

.card-stack.code-mode {
  aspect-ratio: auto;
  height: 100%;
}

  /* 개별 카드 */
  .card {
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    background: #111;
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-sizing: border-box;
    display: flex;
    overflow: hidden;
    box-shadow: 0 0.926vh 2.083vw rgba(0,0,0,0.5); /* 10px 40px → 1920x1080 기준 */
    backface-visibility: hidden;
    will-change: transform, opacity;
    isolation: isolate; /* stacking context 분리 */
  }

  .card-content {
    display: flex;
    width: 100%;
    height: 100%;
    position: relative;
  }

  /* iframe 스타일 - 카드에 꽉 맞게 */
  .project-iframe {
    width: 100%;
    height: 100%;
    border: none;
    background: #000;
    position: absolute;
    top: 0;
    left: 0;
    transition: opacity 0.3s ease;
    /* z-index 제거 - 카드의 z-index를 따르도록 */

    &.visible {
      opacity: 1;
      pointer-events: auto;
    }

    &.hidden {
      opacity: 0;
      pointer-events: none;
    }
  }

  .no-video-message {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(0, 0, 0, 0.8);
    color: rgba(255, 255, 255, 0.6);
    font-size: 1.25vw; /* 24px */
    font-family: 'Pretendard', sans-serif;
  }

  /* Visual Section (Left) */
  .visual-part {
    flex: 1.2;
    position: relative;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding: 2.083vw; /* 40px → 1920px 기준 */
    border-right: 1px solid rgba(255,255,255,0.05);
  }

  .visual-bg-text {
    position: absolute;
    top: 50%;
    left: 0;
    transform: translateY(-50%);
    font-family: 'Syncopate', sans-serif;
    font-size: 8rem;
    font-weight: 700;
    color: rgba(255,255,255,0.03);
    white-space: nowrap;
    z-index: 0;
  }

  .visual-part h2 {
    font-family: 'Syncopate', sans-serif;
    font-size: 3.5rem;
    line-height: 1;
    margin: 0;
    color: #fff;
    z-index: 2;
    text-shadow: 0 0.37vh 1.042vw rgba(0,0,0,0.5); /* 4px 20px → 1920x1080 기준 */
  }

  .cat {
    font-size: 0.8rem;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: rgba(255,255,255,0.7);
    margin-bottom: 1.389vh; /* 15px → 1080px 기준 */
    z-index: 2;
  }

  /* Info Section (Right) */
  .info-part {
    flex: 1;
    padding: 2.083vw; /* 40px → 1920px 기준 */
    display: flex;
    flex-direction: column;
    background: #0e0e0e;
  }

.info-part.code-only {
  width: 100%;
  min-height: 100%;
}

.code-editor-chrome {
  background: #1a1b1f;
  border: 1px solid rgba(255, 255, 255, 0.05);
  border-radius: 0.417vw 0.417vw 0 0; /* 8px */
  margin: -2.083vw -2.083vw 0; /* 상단 패딩과 맞추기 위해 양옆 음수 마진 */
}

.code-tabs {
  display: flex;
  gap: 0;
}

.code-tab {
  padding: 0.5vh 1vw;
  border-radius: 0; /* 라운드 제거 */
  background: #2a2d2e; /* VSCode 비활성 탭 느낌 */
  color: rgba(255, 255, 255, 0.7);
  font-size: 0.85rem;
  letter-spacing: -0.01em;
  border: 1px solid #1f1f1f;
  border-right: 0; /* 인접 탭과 붙도록 */
  cursor: pointer;
  user-select: none;
  transition: background 0.15s, color 0.15s, border-color 0.15s;

  &:hover {
    background: #323537;
  }

  &.active {
    background: #1e1e1e;
    border-color: #1e1e1e;
    color: #fff;
    box-shadow: inset 0 -2px 0 #FF5912; /* 활성 표시선 */
  }
}

.code-window {
  background: #0c0d10;
  border: 1px solid rgba(255, 255, 255, 0.06);
  border-radius: 0 0 0.417vw 0.417vw; /* 8px */
  margin: 0 -2.083vw 0; /* 양옆 맞추기 */
  font-family: 'Fira Code', 'DM Mono', Consolas, monospace;
  font-size: 0.95rem;
  line-height: 1.6;
  color: #e9eef5;
  min-height: 18vh;
  max-height: calc(100vh - 24vh);
  overflow: auto;
  padding: 0 0 4vh; /* 코드 끝과 그라데이션 사이 여유 */
}

.code-window .code-block {
  font-size: 1.04vw; /* 1.2x */
  line-height: 1.65;
}

.code-line {
  white-space: pre-wrap;
  word-break: break-word;
  color: #d4d7dd;
}

.code-line.comment {
  color: #8aa2c0;
}

.code-line.empty {
  line-height: 0.8;
}

  .info-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid rgba(255,255,255,0.1);
    padding-bottom: 1.852vh; /* 20px → 1080px 기준 */
    margin-bottom: 1.852vh; /* 20px → 1080px 기준 */
  }

  /* 스크롤바 숨기기 (우측 패널 및 코드창) */
  .projects-info,
  .code-window {
    scrollbar-width: none; /* Firefox */
  }

  .projects-info::-webkit-scrollbar,
  .code-window::-webkit-scrollbar {
    display: none; /* Chrome/Safari/Edge */
  }

  .role {
    font-size: 0.9rem;
    color: #fff;
    font-weight: 600;
  }

  .period {
    font-size: 0.8rem;
    color: #666;
  }

  .summary {
    font-size: 1rem;
    line-height: 1.6;
    color: #ccc;
    margin-bottom: auto;
  }

  .tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.741vh; /* 8px → 1080px 기준 */
    margin-top: 1.852vh; /* 20px → 1080px 기준 */
  }

  .tag {
    font-size: 0.75rem;
    padding: 0.463vh 0.521vw; /* 5px 10px → 1920x1080 기준 */
    background: rgba(255,255,255,0.08);
    color: #aaa;
    border-radius: 0.208vw; /* 4px → 1920px 기준 */
  }

.link-icons {
  margin-top: 1.852vh; /* 20px → 1080px 기준 */
  align-self: flex-end;
  display: flex;
  gap: 0.625vw;
}

  .link-icon {
  margin-top: 0;
    font-size: 1.5rem;
    color: #fff;
    text-decoration: none;
    transition: 0.3s;

    &:hover {
      opacity: 0.7;
      transform: rotate(45deg);
    }
  }

  /* Vignette / Fade mask for top and bottom */
  .mask-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 10;
    background: linear-gradient(to bottom, #050505 0%, transparent 20%, transparent 80%, #050505 100%);
  }

}
