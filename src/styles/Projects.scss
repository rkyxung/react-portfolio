@use './fonts' as *;

.projects-viewport {
  background-color: #050505;
  min-height: 100vh;
  font-family: 'Pretendard', sans-serif;
  overflow: hidden;

  .viewport {
    width: 100vw;
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #050505;
    perspective: 78.125vw; /* 외부에서 보는 시점 (1920px 기준) */
  }

  /* A 타입: 위 / 가운데 / 아래 3개 면 */
  .planes {
    position: relative;
    width: 100%;
    height: 100%;
    overflow: visible;
  }

  .plane {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    will-change: transform, opacity;
    transition: transform 0.2s ease-out, opacity 0.2s ease-out;
  }

  .plane-top {
    z-index: 3;

    .top-inner {
      text-align: center;
      color: #fff;

      .top-logo {
        font-family: 'Syncopate', sans-serif;
        font-size: 7rem;
        font-weight: 700;
        line-height: 1;
        margin: 0;
        text-transform: uppercase;
        letter-spacing: 0.08em;
      }

      .top-subtitle {
        font-size: 1rem;
        letter-spacing: 0.3em;
        color: rgba(255, 255, 255, 0.7);
        margin-top: 1.481vh; /* 16px → 1920x1080 기준 */
        text-transform: uppercase;
      }
    }
  }

  .plane-middle {
    z-index: 2;
    position: relative;
  }

  /* 왼쪽: 프로젝트 네비게이션 */
  .projects-nav {
    position: absolute;
    left: 2.083vw; /* 40px → 1920px 기준 */
    top: 50%;
    transform: translateY(-50%);
    z-index: 100;
    width: 18vw; /* 고정 너비 */
    max-height: 80vh;
    overflow-y: auto;
    padding-right: 1.042vw; /* 20px */

    &::-webkit-scrollbar {
      width: 0.208vw; /* 4px */
    }

    &::-webkit-scrollbar-track {
      background: transparent;
    }

    &::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.2);
      border-radius: 0.104vw; /* 2px */
    }

    .nav-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .nav-item {
      display: flex;
      align-items: center;
      gap: 1.042vw; /* 20px */
      padding: 0.926vh 0.521vw; /* 10px 10px */
      cursor: pointer;
      color: #fff;
      font-size: 0.9rem;
      transition: background-color 0.2s;
      border-radius: 0.208vw; /* 4px */
      white-space: nowrap;

      &:hover {
        background-color: rgba(255, 255, 255, 0.05);
      }

      &.active {
        background-color: rgba(0, 123, 255, 0.8); /* 파란색 하이라이트 */
        color: #fff;

        .nav-number {
          background-color: rgba(0, 100, 200, 1);
          color: #fff;
        }
      }

      .nav-number {
        display: inline-block;
        min-width: 2.083vw; /* 40px */
        font-weight: 600;
        color: rgba(255, 255, 255, 0.7);
        font-size: 0.85rem;
        padding: 0.185vh 0.26vw; /* 2px 5px */
        border-radius: 0.104vw; /* 2px */
        text-align: center;
      }

      .nav-title {
        flex: 1;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
    }
  }

  /* 오른쪽: 프로젝트 설명 */
  .projects-info {
    position: absolute;
    right: 2.083vw; /* 40px → 1920px 기준 */
    top: 50%;
    transform: translateY(-50%);
    z-index: 100;
    width: 23vw; /* 고정 너비 */
    max-height: 80vh;
    overflow-y: auto;
    padding-left: 1.042vw; /* 20px */

    &::-webkit-scrollbar {
      width: 0.208vw; /* 4px */
    }

    &::-webkit-scrollbar-track {
      background: transparent;
    }

    &::-webkit-scrollbar-thumb {
      background: rgba(255, 255, 255, 0.2);
      border-radius: 0.104vw; /* 2px */
    }

    .info-content {
      color: #fff;
    }

    .info-header {
      margin-bottom: 1.852vh; /* 20px */

      .category {
        display: block;
        font-size: 0.75rem;
        letter-spacing: 0.2em;
        text-transform: uppercase;
        color: rgba(255, 255, 255, 0.6);
        margin-bottom: 0.926vh; /* 10px */
      }

      .project-title {
        font-family: 'Syncopate', sans-serif;
        font-size: 2.5rem;
        font-weight: 700;
        line-height: 1.2;
        margin: 0;
        color: #fff;
      }
    }

    .info-meta {
      display: flex;
      flex-direction: column;
      gap: 0.463vh; /* 5px */
      margin-bottom: 1.852vh; /* 20px */
      padding-bottom: 1.852vh; /* 20px */
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);

      .role {
        font-size: 0.9rem;
        color: #fff;
        font-weight: 600;
      }

      .period {
        font-size: 0.8rem;
        color: rgba(255, 255, 255, 0.6);
      }
    }

    .summary {
      font-size: 1rem;
      line-height: 1.6;
      color: rgba(255, 255, 255, 0.9);
      margin-bottom: 1.852vh; /* 20px */
    }

    .details-list {
      list-style: none;
      padding: 0;
      margin: 0 0 1.852vh 0; /* 20px */
      
      li {
        position: relative;
        padding-left: 1.042vw; /* 20px */
        margin-bottom: 0.926vh; /* 10px */
        color: rgba(255, 255, 255, 0.7);
        line-height: 1.5;
        font-size: 0.9rem;

        &::before {
          content: '•';
          position: absolute;
          left: 0;
          color: rgba(255, 255, 255, 0.4);
        }
      }
    }

    .tags {
      display: flex;
      flex-wrap: wrap;
      gap: 0.521vw; /* 10px */
      margin-bottom: 1.852vh; /* 20px */

      .tag {
        font-size: 0.75rem;
        padding: 0.463vh 0.521vw; /* 5px 10px */
        background: rgba(255, 255, 255, 0.08);
        color: rgba(255, 255, 255, 0.7);
        border-radius: 0.208vw; /* 4px */
      }
    }

    .link-button {
      display: inline-block;
      padding: 0.926vh 1.042vw; /* 10px 20px */
      background: rgba(255, 255, 255, 0.1);
      color: #fff;
      text-decoration: none;
      border-radius: 0.208vw; /* 4px */
      font-size: 0.9rem;
      transition: background-color 0.3s;

      &:hover {
        background: rgba(255, 255, 255, 0.2);
      }
    }
  }

  .plane-bottom {
    z-index: 1;

    .bottom-inner {
      display: flex;
      gap: 2.083vw; /* 40px → 1920px 기준 */
      padding: 2.222vh 2.083vw; /* 24px 40px → 1920x1080 기준 */
      background-color: rgba(0, 0, 0, 0.7);
      border-top: 1px solid rgba(255, 255, 255, 0.25);
      border-bottom: 1px solid rgba(255, 255, 255, 0.25);
      backdrop-filter: blur(0.417vw); /* 8px → 1920px 기준 */
      color: #fff;
      align-items: flex-start;
      justify-content: center;

      .bottom-column {
        display: flex;
        flex-direction: column;
        gap: 0.741vh; /* 8px → 1080px 기준 */
        min-width: 9.375vw; /* 180px → 1920px 기준 */

        h3 {
          font-size: 0.9rem;
          letter-spacing: 0.18em;
          text-transform: uppercase;
          margin: 0 0 0.741vh; /* 8px → 1080px 기준 */
          color: rgba(255, 255, 255, 0.8);
        }

        button {
          border: 1px solid #fff;
          background: #000;
          color: #fff;
          font-size: 0.8rem;
          padding: 0.556vh 0.625vw; /* 6px 12px → 1920x1080 기준 */
          text-transform: none;
          cursor: pointer;
          text-align: left;
          white-space: nowrap;

          &:hover {
            background: #fff;
            color: #000;
          }
        }
      }
    }
  }

  /* 중앙 카드 컨테이너 - 왼쪽 네비와 오른쪽 설명 공간 확보 */
  .stage-container {
    width: calc(100vw - 45vw); /* 전체 너비에서 왼쪽(20vw) + 오른쪽(25vw) 제외 */
    max-width: 50vw; /* 최대 너비 제한 */
    height: 100%;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto; /* 중앙 정렬 */
  }

  .view-toggle {
    position: absolute;
    top: 2.083vw; /* 40px */
    right: 2.083vw; /* 40px */
    z-index: 200;
    cursor: pointer;

    .toggle-track {
      position: relative;
      width: 7.292vw; /* 140px - 두 개의 버튼 + gap */
      height: 4.167vw; /* 80px */
      background: #2A2A2A; /* 어두운 회색 배경 */
      border-radius: 2.083vw; /* 40px - 둥근 형태 */
      padding: 0.521vw; /* 10px */
      box-shadow: 0 0.208vw 0.521vw rgba(0, 0, 0, 0.3);
    }

    .toggle-slider {
      position: absolute;
      width: 3.125vw; /* 60px */
      height: 3.125vw; /* 60px */
      background: #FF5912; /* 오렌지색 배경 */
      border-radius: 50%; /* 원형 */
      top: 0.521vw; /* 10px */
      left: 0.521vw; /* 10px */
      transition: transform 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0.104vw 0.313vw rgba(0, 0, 0, 0.2);

      svg {
        width: 1.406vw; /* 27px */
        height: 0.938vw; /* 18px */
      }

      svg:last-child {
        width: 1.719vw; /* 33px */
        height: 1.51vw; /* 29px */
      }

      &.active {
        transform: translateX(calc(3.125vw + 0.521vw)); /* 오른쪽으로 이동 (버튼 너비 + gap) */
      }
    }
  }

  /* 카드들이 배치될 3D 공간 */
  .card-stack {
    position: relative;
    width: 100%;
    aspect-ratio: 16 / 9; /* 16:9 비율 고정 */
    transform-style: preserve-3d;
  }

  /* 개별 카드 */
  .card {
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    background: #111;
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-sizing: border-box;
    display: flex;
    overflow: hidden;
    box-shadow: 0 0.926vh 2.083vw rgba(0,0,0,0.5); /* 10px 40px → 1920x1080 기준 */
    backface-visibility: hidden;
    will-change: transform, opacity;
    isolation: isolate; /* stacking context 분리 */
  }

  .card-content {
    display: flex;
    width: 100%;
    height: 100%;
    position: relative;
  }

  /* iframe 스타일 - 카드에 꽉 맞게 */
  .project-iframe {
    width: 100%;
    height: 100%;
    border: none;
    background: #000;
    position: absolute;
    top: 0;
    left: 0;
    transition: opacity 0.3s ease;
    /* z-index 제거 - 카드의 z-index를 따르도록 */

    &.visible {
      opacity: 1;
      pointer-events: auto;
    }

    &.hidden {
      opacity: 0;
      pointer-events: none;
    }
  }

  .no-video-message {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(0, 0, 0, 0.8);
    color: rgba(255, 255, 255, 0.6);
    font-size: 1.25vw; /* 24px */
    font-family: 'Pretendard', sans-serif;
  }

  /* Visual Section (Left) */
  .visual-part {
    flex: 1.2;
    position: relative;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding: 2.083vw; /* 40px → 1920px 기준 */
    border-right: 1px solid rgba(255,255,255,0.05);
  }

  .visual-bg-text {
    position: absolute;
    top: 50%;
    left: 0;
    transform: translateY(-50%);
    font-family: 'Syncopate', sans-serif;
    font-size: 8rem;
    font-weight: 700;
    color: rgba(255,255,255,0.03);
    white-space: nowrap;
    z-index: 0;
  }

  .visual-part h2 {
    font-family: 'Syncopate', sans-serif;
    font-size: 3.5rem;
    line-height: 1;
    margin: 0;
    color: #fff;
    z-index: 2;
    text-shadow: 0 0.37vh 1.042vw rgba(0,0,0,0.5); /* 4px 20px → 1920x1080 기준 */
  }

  .cat {
    font-size: 0.8rem;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: rgba(255,255,255,0.7);
    margin-bottom: 1.389vh; /* 15px → 1080px 기준 */
    z-index: 2;
  }

  /* Info Section (Right) */
  .info-part {
    flex: 1;
    padding: 2.083vw; /* 40px → 1920px 기준 */
    display: flex;
    flex-direction: column;
    background: #0e0e0e;
  }

  .info-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid rgba(255,255,255,0.1);
    padding-bottom: 1.852vh; /* 20px → 1080px 기준 */
    margin-bottom: 1.852vh; /* 20px → 1080px 기준 */
  }

  .role {
    font-size: 0.9rem;
    color: #fff;
    font-weight: 600;
  }

  .period {
    font-size: 0.8rem;
    color: #666;
  }

  .summary {
    font-size: 1rem;
    line-height: 1.6;
    color: #ccc;
    margin-bottom: auto;
  }

  .tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.741vh; /* 8px → 1080px 기준 */
    margin-top: 1.852vh; /* 20px → 1080px 기준 */
  }

  .tag {
    font-size: 0.75rem;
    padding: 0.463vh 0.521vw; /* 5px 10px → 1920x1080 기준 */
    background: rgba(255,255,255,0.08);
    color: #aaa;
    border-radius: 0.208vw; /* 4px → 1920px 기준 */
  }

  .link-icon {
    margin-top: 1.852vh; /* 20px → 1080px 기준 */
    align-self: flex-end;
    font-size: 1.5rem;
    color: #fff;
    text-decoration: none;
    transition: 0.3s;

    &:hover {
      opacity: 0.7;
      transform: rotate(45deg);
    }
  }

  /* Vignette / Fade mask for top and bottom */
  .mask-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 10;
    background: linear-gradient(to bottom, #050505 0%, transparent 20%, transparent 80%, #050505 100%);
  }

  @media (max-width: 768px) {
    .stage-container { width: 90vw; }
    .card-content { flex-direction: column; }
    .visual-part { flex: 1; border-right: none; border-bottom: 1px solid rgba(255,255,255,0.1); }
    .info-part { flex: 1.2; }
    .visual-part h2 { font-size: 2.5rem; }
  }
}